<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boxing Match Simulator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #1a1a1a;
      color: #f0f0f0;
      padding: 40px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #ffcc00;
    }
    .input-group input, select, .add-btn, .simulate-btn, .remove-btn, .reset-btn {
      padding: 10px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
    }
    .add-btn, .simulate-btn, .remove-btn, .reset-btn {
      background-color: #ffcc00;
      cursor: pointer;
      font-weight: bold;
    }
    .fighter {
      margin-bottom: 20px;
    }
    #result {
      margin-top: 30px;
      white-space: pre-wrap;
      background: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      height: 400px;
      overflow-y: auto;
      border: 1px solid #444;
    }
    .scorecard {
      margin-top: 30px;
      background: #2a2a2a;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #444;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #444;
    }
    th {
      background-color: #333;
    }
  </style>
</head>
<body>
  <h1>Boxing Match Simulator</h1>

  <div class="input-group">
    <input type="text" id="fighterName" placeholder="Fighter Name">
    <input type="number" id="fighterWins" placeholder="Wins">
    <input type="number" id="fighterLosses" placeholder="Losses">
    <input type="number" id="fighterOverall" placeholder="Overall">
    <button class="add-btn" onclick="addFighter()">Add Fighter</button>
    <button class="remove-btn" onclick="removeFighter()">Remove Fighter</button>
    <button class="reset-btn" onclick="resetFighters()">Reset Fighters</button>
  </div>

  <div class="fighter">
    <label for="selectA">Fighter A:</label>
    <select id="selectA"></select>
  </div>

  <div class="fighter">
    <label for="selectB">Fighter B:</label>
    <select id="selectB"></select>
  </div>

  <button class="simulate-btn" onclick="simulateMatch()">Simulate Match</button>

  <div id="result" class="result-text"></div>

  <div id="scorecard" class="scorecard" style="display:none;">
    <h3>Judges' Scorecards</h3>
    <table>
      <thead>
        <tr>
          <th>Judge</th>
          <th>Round 1</th>
          <th>Round 2</th>
          <th>Round 3</th>
          <th>Round 4</th>
          <th>Round 5</th>
          <th>Round 6</th>
          <th>Round 7</th>
          <th>Round 8</th>
          <th>Round 9</th>
          <th>Round 10</th>
          <th>Round 11</th>
          <th>Round 12</th>
        </tr>
      </thead>
      <tbody id="scorecardBody"></tbody>
    </table>
  </div>

  <script>
    let fighters = {};

    function addFighter() {
      const name = document.getElementById('fighterName').value.trim();
      const wins = parseInt(document.getElementById('fighterWins').value);
      const losses = parseInt(document.getElementById('fighterLosses').value);
      const overall = parseInt(document.getElementById('fighterOverall').value);

      if (!name || isNaN(wins) || isNaN(losses) || isNaN(overall)) {
        alert('Please fill all fighter fields correctly.');
        return;
      }

      fighters[name] = { wins, losses, overall };
      updateFighterDropdowns();
      saveFighterData();

      document.getElementById('fighterName').value = '';
      document.getElementById('fighterWins').value = '';
      document.getElementById('fighterLosses').value = '';
      document.getElementById('fighterOverall').value = '';
    }

    function removeFighter() {
      const name = document.getElementById('selectA').value;
      if (!fighters[name]) return;
      delete fighters[name];
      updateFighterDropdowns();
      saveFighterData();
    }

    function resetFighters() {
      fighters = {};
      updateFighterDropdowns();
      saveFighterData();
    }

    function updateFighterDropdowns() {
      const selectA = document.getElementById('selectA');
      const selectB = document.getElementById('selectB');
      selectA.innerHTML = '';
      selectB.innerHTML = '';

      for (const name in fighters) {
        const fighter = fighters[name];
        const optionText = `${name} (${fighter.wins}-${fighter.losses}, OVR: ${fighter.overall})`;
        const optionA = new Option(optionText, name);
        const optionB = new Option(optionText, name);
        selectA.appendChild(optionA);
        selectB.appendChild(optionB);
      }
    }

    function saveFighterData() {
      localStorage.setItem('fighters', JSON.stringify(fighters));
    }

    function loadFighterData() {
      const savedFighters = localStorage.getItem('fighters');
      if (savedFighters) {
        fighters = JSON.parse(savedFighters);
        updateFighterDropdowns();
      }
    }

    function formatTime(minute, second) {
      const min = 2 - minute;
      const sec = 60 - second;
      return `${min}:${sec.toString().padStart(2, '0')}`;
    }

    async function simulateMatch() {
      const nameA = document.getElementById('selectA').value;
      const nameB = document.getElementById('selectB').value;

      if (!fighters[nameA] || !fighters[nameB]) {
        alert('Both fighters must be selected.');
        return;
      }

      if (nameA === nameB) {
        alert('Please select two different fighters.');
        return;
      }

      const fighterA = fighters[nameA];
      const fighterB = fighters[nameB];

      let stats = {
        [nameA]: { punchesThrown: 0, punchesLanded: 0, knockdowns: 0, stamina: 100, damage: 0 },
        [nameB]: { punchesThrown: 0, punchesLanded: 0, knockdowns: 0, stamina: 100, damage: 0 }
      };

      let resultText = `--- Match Start: ${nameA} vs. ${nameB} ---\n`;
      let fightEnded = false;
      let endRound = 12;
      let endTime = '3:00';

      for (let round = 1; round <= 12; round++) {
        resultText += `\nRound ${round}\n`;

        for (let minute = 0; minute < 3; minute++) {
          for (let second = 0; second < 60; second += 15) {
            await new Promise(resolve => setTimeout(resolve, 30));
            const timeStamp = formatTime(minute, second);
            const isA = Math.random() < 0.5;
            const actor = isA ? nameA : nameB;
            const defender = isA ? nameB : nameA;
            stats[actor].punchesThrown++;

            let random = Math.random();
            let action = '';

            if (random < 0.25) {
              action = `${actor} lands a clean jab on ${defender}.`;
              stats[actor].punchesLanded++;
              stats[defender].stamina -= 1;
              stats[defender].damage += 1;
            } else if (random < 0.5) {
              action = `${actor} throws a vicious uppercut!`;
              stats[actor].punchesLanded++;
              stats[defender].stamina -= 3;
              stats[defender].damage += 3;
            } else if (random < 0.7) {
              action = `${defender} absorbs a hard body shot.`;
              stats[actor].punchesLanded++;
              stats[defender].stamina -= 2;
              stats[defender].damage += 2;
            } else {
              action = 'Both fighters feint and look for openings.';
            }

            resultText += `[${timeStamp}] ${action}\n`;
          }
        }
      }

      // Simulate Judges' Scorecards
      const scorecards = generateScorecards();
      document.getElementById('scorecard').style.display = 'block';
      populateScorecards(scorecards);

      // Randomly decide the winner
      const winner = Math.random() < 0.5 ? nameA : nameB;

      if (winner === nameA) {
        fighterA.wins++;
        fighterB.losses++;
        resultText += `\nWinner by Decision: ${nameA} (Record: ${fighterA.wins}-${fighterA.losses})`;
      } else {
        fighterB.wins++;
        fighterA.losses++;
        resultText += `\nWinner by Decision: ${nameB} (Record: ${fighterB.wins}-${fighterB.losses})`;
      }

      resultText += `\n\n--- Post Fight Stats ---\n`;
      for (let name of [nameA, nameB]) {
        const s = stats[name];
        resultText += `${name}: ${s.punchesThrown} thrown, ${s.punchesLanded} landed, Knockdowns: ${s.knockdowns}, Stamina Left: ${s.stamina}, Damage Taken: ${s.damage}\n`;
      }

      updateFighterDropdowns();
      document.getElementById('result').textContent = resultText;
    }

    function generateScorecards() {
      let scorecards = [];
      for (let i = 0; i < 3; i++) {
        let scores = [];
        for (let round = 1; round <= 12; round++) {
          scores.push(Math.floor(Math.random() * 2) + 1); // 1 or 2 for scoring fighter
        }
        scorecards.push(scores);
      }
      return scorecards;
    }

    function populateScorecards(scorecards) {
      const tbody = document.getElementById('scorecardBody');
      tbody.innerHTML = '';
      for (let i = 0; i < 3; i++) {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>Judge ${i + 1}</td>` + scorecards[i].map(score => `<td>${score}</td>`).join('');
        tbody.appendChild(tr);
      }
    }

    loadFighterData();
  </script>
</body>
</html>
